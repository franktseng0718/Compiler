# 作業 4 報告(使用multipass)

> 學生：曾敏峰

> 學號：0616095

# 一開始的想法

這個作業我一開始認為比上次作業容易，因為這次助教的提示給的比較多，所以架構上就沒想那麼多直接開始寫。

# 寫的過程

在寫的時候第一個遇到的問題是，因為要multipass嘛，那pop出來的table要怎麼存它呢?想著想著想到大二演算法教的一種資料結構，但我有點忘了它叫甚麼了，好像是兩個stack還是一個stack一個queue的，可以把一邊拿出來的東西，從另一邊放進去，所以我就順著往這個方向思考，因為stack和queue就是相反的嘛，所以stack先pop出來的就會被先push到queue裡面，所以我做了個queue的陣列，index就是level，這樣之後要取用的時候，剛好照著順序取用就可以了。第二個問題就是在寫semantic的部分，看了助教的code，我很快就放棄自己的了，說真的，我真的很想用自己上一次的繼續寫下去，但我上次在建AST TREE的時候，並沒有將各個node的資訊給足，只有傳要印的東西而已，寫的也有點亂，所以我這次就想說用助教的應該比較快，在做semantic的時候，幾乎都可以靠symbol table和node的資訊做判斷，唯一花了我一點時間的是，錯誤有時會一起出現，但spec說，若一個錯誤造成型別無法判斷甚至辨識，就不用再印出此錯誤，我想到的方法只能加上不少變數去保護各種error的輸出。我知道我這方法沒有很好，因為我一開始寫沒有想到這問題，因此寫得有點亂亂的，後來發現的時候就只能這樣補救比較快了。

# 寫完的遺憾

這次作業大約花了一個星期，加起來大概二十幾個鐘頭，算是比上次少了一點，但這次有兩個遺憾，一個是沒有拿自己之前的繼續往下做，另一個就是沒有寫得很漂亮，導致我的code可讀性很低，應該要再更OOP一點才對，但我過幾天有個考試，看考完試有沒有時間把它做好一點囉。


